

* General/Publications 						:SICONOS:PUB:
** RR publication						 :VA:ALLTEAM:
  - update examples et texte, add Numerics part
  - ACM TOMS
  - MCMDS
** DONE commit update of SiconosNutShell				 :VA:
   CLOSED: [2012-02-03 Ven 16:21]
** DONE Web site update
   DEADLINE: <2012-02-17 Ven> CLOSED: [2012-02-29 Mer 09:14]
*** With galleries and videos (bullet style)
** TODO Update doc Newton/Euler in DevNotes
   DEADLINE: <2015-07-23 Thu>
** Collision detection
   - have a look to Ericson book
   - have a look to Johnson and Cohen (2004) paper.


* Development list for Numerics 		     :SICONOS:DEVEL:NUMERICS:
*** Study of Semismooth matlab's implementation of Ferris and Kanzow
*** TODO MLCP solvers should be compliant with dense and sparse storage as well as both formulations.
*** TODO Implement a function FrictionContact2DtoLcp
*** TODO Doxygen Documentation
    + list of solvers on main paqe
    + Create modules and groups to obtain a documentation of functions.
      see http://www.stack.nl/~dimitri/doxygen/grouping.html

*** DONE MCP implementation with FB			     :VINCENT:FRANCK:
    DEADLINE: <2012-06-19 Mar> CLOSED: [2012-10-11 Jeu 08:53]
 + copy MLCP_FB solver to MCP
 + move NonSmoothNeighBour to ..
 + implement setFunction with function pointers in MCP
 + write a first test examples

*** TODO clean LA.h + SiconosMKL.h
   - [ ] remove C_ temp variables from old macros
   - [ ] merge SiconosMKL

*** FrictionContact
**** DONE Write a tex file on Alart-Curnier for PrimalFriction	    :VINCENT:
     DEADLINE: <2012-10-26 Ven> CLOSED: [2012-10-24 Mer 10:01]
**** TODO Write a tex file on Newton with De Saxce approach 	    :VINCENT:
     DEADLINE: <2012-11-09 Ven>
**** DONE Add a sparse format (see fclib)			    :MAURICE:
     CLOSED: [2013-01-18 Ven 10:31]
**** DONE Direct Alart--Curnier implementation.
     CLOSED: [2013-01-18 Ven 11:01]
/* TODO */
/* typedef struct */
/* { */
/*   int storageType; */
/*   int size0; */
/*   int size1; */
/*   double* denseMatrix; */
/*   SparseBlockStructuredMatrix* sparseBlockMatrix; */
/*   SparseMatrix * sparseMatrix; */
/* } NumericsMatrix; */

**** TODO Contact with LMGC [33%] 				    :MAURICE:
***** DONE Open the LMGC repository
      CLOSED: [2013-01-18 Ven 11:02]
***** TODO Test on  LMGC90v2_Examples/Bench/SiconosNumerics/Global
      + Complete globalFrictionContact3D_LmgcDriver for non symmetric matrix
***** TODO Parse examples in LMGC

* Development list for Kernel 			       :SICONOS:DEVEL:KERNEL:
** DONE Develop Paoli--Schatzman scheme for LagrangianLinearTIDS
   CLOSED: [2011-09-22 Thu 15:23]
** DONE Fix the use of Levels and initialization in Siconos
   CLOSED: [2011-09-20 Tue 09:41]
    1) Review  all Relation for insertions in data of the right _r or _p
    2) Draft of simulation initialize
       Init OSI
       Init DS sauf p
       ComputeLevelsforInputandOutput
       init Interactions (with init DS for p inside)
       Si P==NULL (pas d'interaction) le specifie dans OSI
    3) updateInteractions
       Check ComputeLevelsforInputandOutput is recomputed
       init Interactions( with	init DS for p inside if necessary)
    4) ComputeLevelsforInputandOutput
       Implementation in Simulation.cpp and not in Topology
       visitor on OSI with ds, interaction inside.
       remove Computerelative degree from Topology.
       ReplaceLevelMax in SImulation
** DONE Move TimeStepping::predictorDeactivate and TimeStepping::predictorActivate
    CLOSED: [2011-09-28 Wed 22:47]
- This should  be moved in Osi where the rule of activation and desactivation (if any) must be implemented (take as example computefreeOutput)
- This rule must use _gamma for LagrangianR to parameterize the activation
** DONE Fix the initialization problem in Lsodar
   CLOSED: [2011-09-27 Tue 17:03]
** DONE Implement enhanced rule must use _gamma to parameterize the activation
   CLOSED: [2011-10-30 Sun 09:41]
**** DONE forbid more than one relation in Interaction
     CLOSED: [2011-09-27 Tue 09:24]
**** DONE forbid Nslawzise != interactionsize
     CLOSED: [2011-09-27 Tue 09:24]
**** DONE Split the Unitary relation.
     CLOSED: [2011-09-27 Tue 09:25]
     in a part that goes directly in Relation (or Interaction) and a part that goes in a new class or in TopologyForSimulation.
** DONE Change the graph for a graph of Interaction ? Perhaps, duplicate the graph in a first iteration
   CLOSED: [2012-05-03 Thu 16:01]
** TODO Directed graph? issue on iteration on diagonal blocks : adjacent_vertices, out_edges => 2x blocks
 + check symmetric case in  OneStepNSProblem.cpp:270 : computeUnitaryBlock(*ei);
** TODO Standardize the updateIndexSets with external rules in Osi.
  + Moreau is Ok
     with
     bool Moreau::removeInteractionInIndexSet(SP::Interaction inter, unsigned int i)
     and
     bool Moreau::addInteractionInIndexSet(SP::Interaction inter, unsigned int i)
  + PaoliSchatzman is ok since there is no update indexSets.
  + D1MinusLinear must be done. For the moment, the fact that we use TimeSteppingD1MinusLinear
    prevents to do some changes.
  + Lsodat must be developped.
** TODO Develop Paoli--Schatzman scheme for LagrangianDS and NewtonEulerDS  :VA:
** TODO MechanicalDS, MechanicalR ?
** TODO Rename qDot in velocity see with OB.
** TODO Other rotations implementations for Direct implementation (O. Bruls algorithms)
** CANCELLED Add an empty ComputeFreeOutput in Moreau2 to simplify computeqBlock in LinearOSNS
   CLOSED: [2016-04-19 Tue 12:56]
** TODO Detail computation of residual terms $\mathcal R_y, R_\lambda, R_q$ in DevNotes
** DONE Check why Simulation doesn't work with mutilple interaction and one relation (ColumnOfBeads)
   CLOSED: [2012-10-15 Mon 11:24]

   Moreau.cpp:1408 (svn 3477) ComputeFreeOutput
   C = mainInteraction->relation()->C();
   [...]

   C() is given by relation and is dependant of dynamical systems involved.
   cf disks simulation with shared relation...

** DONE Add ColumnOfBeads example for testing dynamic interaction graph.
** DONE Remove UnitaryRelation
   CLOSED: [2012-05-03 Thu 16:01]

** DONE [100%] Insert the MBTB of Saladyn in Siconos (siconos GPL Licence)
   CLOSED: [2016-04-19 Tue 12:57]
*** DONE first import.
    CLOSED: [2013-03-03 Dim 09:36]
*** DONE check header licence and so on
    CLOSED: [2016-04-19 Tue 12:57]

** DONE ProjectOnConstraints Schemes					 :VA:
   DEADLINE: <2012-02-18 Sam> CLOSED: [2012-02-29 Mer 09:15]
 + Implement std approach with level =0 (Projection on all contraints in IndexSet(0))
** DONE ProjectOnConstraints Schemes					 :VA:
   DEADLINE: <2012-03-30 Ven> CLOSED: [2012-05-07 Lun 10:23]
 + Understand if we can factorize block and blockProj by using differents indexSet.
** DONE Start to implement Combined approach
   DEADLINE: <2012-05-30 Mer> CLOSED: [2012-05-10 Jeu 15:40]
** DONE Combined and Projected Approaches
   CLOSED: [2013-03-03 Dim 09:37]
   + issues to fix : Visitor uses in Simulation.cpp visitor ?
   + use lambda[0] to store the multiplier
   + check on a nonlinear case (Rocking BLock)
** TODO In Topology put a check if the Interaction was added by a user to avoid duplicated Interaction in the graph
** TODO remove _levelMin and _levelMax in OneStepNSproblem and replace by _level
** TODO Simulation.*pp : add _numberofIndexSets
   + the goal is to instantiate the right number of index sets independently on
     _levelMinForOutput _levelMaxForOutput ...
     since there is no direct link between these two number.

** TODO Interaction.*pp FirstOrderR.*pp Clean the use of g_alpha, h_alpha
 - Why in example Examples/Electronics/IdealSwitch we derive computeg and computeh and not computeInput and computeOutput ?
 - Furthermore, g_alpha and h_alpha are filled in computeg and computeh
 - the update of Y (output) is only done in  LinearOSNS::postCompute() by
   setBlock(*_w, y, y->size(), pos, 0)
 -  We never correctly update the input since computeOutput calls only computeh.

   ---> This has to be completely reviewed.

** TODO Move Storage of Jacobians in SiconosGraph/Properties        :M3.6:
** TODO Remove _y_k and Yold and lambdaOld from Interaction. use workspace or memories
** TODO [20%] HEM5 integration 						 :VA:
*** DONE First integration for the Bouncing Ball example
    CLOSED: [2013-03-03 Dim 09:40]
*** TODO Transfer specific function for Lsodar into Lsodar.cpp
*** TODO Write a first SOLOUT methis for dense output of q and v
*** TODO Write a root-finding function for g(q)
*** TODO add computation of lambda in SOLOUT and write a root-finding for SOLOUT

** TODO remove ds.number() and use dsg0->index(descriptor)
** TODO Review calls to compute/update Jacobians for NewtonEulerR <2016-04-19 Tue>
   + difference between Lagrangian NewtonEuler mainly due to 
   the fact the computation for the normals can not be updated. This is not the same for the Hinge.
   + How to differentiate it
** TODO Implement a purely explicit scheme for NewtonEulerDS and NewtonEulerR <2016-04-19 Tue>   
** TODO Continue to update signature for second order terms in NewtonEulerR*
** TODO Implement a better time integration scheme for NewtonEulerDS 	 :VA:
   DEADLINE: <2016-12-25 Sun> for Xmas
   + The implementation of NewtonEulerDS is done using the angular velocity vector
     with respect to the axis of the body-fixed frame. (\Omega). This approach allows to
     use a constant matrix of moment of inertia. The price to pay is to compute the external
     moment with respect to the body fixed frame. it the external moment mExt is given with respect
     to the axis of the inertial frame we have to integrate
     I \Omega + \Omega x I \Omega = R^T(q) Mext(t)
   + If the ratio if moments of inertia is large (large aspect), the standard Moreau--Jean scheme become 
     unstable mainly  due to the fact the renormalization of quaternion introduces some terms and drift
     from pure rotational motion. Two solutions may be implemented :
     + The presence of R(q) renders the equation nonlinear with respect to q and not only to \Omega
     For the moment, the Jacobian is computed by finite difference but a analytic equation has to be 
     implemented. The add-on does not bring any better solution.
     + The implementation of time-integrator that is geometrically exact for the rotation.
   + The example siconos/examples/Mechanics/ContactDetection/BulletIO/bar.py illustrates the phenomena.
     For the moment, even without gyrospic forces, the integration of mixed rotations motions is not stable.
   + The same instability has to be expected for contact forces over bars even if it difficult to demonstrate 
     it on simple example

** TODO a first implementation of constraints at the position 
* Development list for Mechanics 		    :SICONOS:DEVEL:MECHANICS:
** how to use plantuml with org
1. get plantuml.jar http://fr.plantuml.com/download.html
2. in .emacs :

;; active Org-babel languages
(org-babel-do-load-languages
 'org-babel-load-languages
 '(;; other Babel languages
   (plantuml . t)))

(setq org-plantuml-jar-path
   (expand-file-name "~/plantuml.jar"))

** a nearly complete class diagram (07ac8ea)

Should be splitted

#+begin_src plantuml :file MechanicsClassDiagram.png

  title Siconos Mechanics

  package "Kernel" #AAAAAA {

  DynamicalSystem <|-- LagrangianDS
  DynamicalSystem <|-- NewtonEulerDS

  class Model

  class Relation

  class Interaction

  class NonSmoothLaw

  class NewtonEulerR

  class NewtonEulerFrom3DLocalFrameR

  Model "1" o-- "n" DynamicalSystem
  Model "1" o-- "n" Interaction

  Interaction o-- Relation
  Interaction o-- NonSmoothLaw

  Relation <|-- LagrangianScleronomousR
  Relation <|-- NewtonEulerR
  NewtonEulerR <|-- NewtonEulerFrom3DLocalFrameR
 }

  package "Bodies" {

  note as N1
  Other bodies Circle, SphereLDS
  and other relations DiskMovingPlanR, etc.
  end note

  LagrangianDS <|-- Disk

  LagrangianScleronomousR <|-- DiskDiskR

  }

  package "Scene Manager" #EEEEEE {

  note top of SpaceFilter
  The main SpaceFilter method is buildInteractions which adds and
  removes vertices (Interactions) in indexSet0. This is the broadphase
  part of contact detection."
  end note


  SpaceFilter : +buildInteractions()
  SpaceFilter : #SP::NSLawMatrix _nslaws

  SpaceFilter *-- NSLawMatrix

  class NSLawMatrix
  note top of NSLawMatrix
  A symmetric matrix
  end note

  NSLawMatrix "1" o-- "n" NonSmoothLaw

  SpaceFilter o-- Model

  }

  package "Joints" #BBBBBB {
  NewtonEulerR <|-- KneeJoinrR
  NewtonEulerR <|-- PivotJointR
  NewtonEulerR <|-- PrismaticJointR
  }


  package "WITH_BULLET=ON" #EEEEEE {

  NewtonEulerDS <|-- BulletDS

  SpaceFilter  <|-- BulletSpaceFilter

  NewtonEulerFrom3DLocalFrameR <|-- BulletR


  BulletSpaceFilter : +buildInteractions()
  BulletSpaceFilter : #SP::StaticObjects _staticObjects
  BulletSpaceFilter : #SP::btCollisionWorld _collisionWorld

  BulletSpaceFilter *-- StaticObjects

  StaticObjects "1" *-- "n" btCollisionObject

  StaticObjects : unsigned int collisionGroup

  BulletR : SP::btManifoldPoint _contactPoints
  BulletR : SP::btPersistentManifold _contactManifold

  BulletR o-- btManifoldPoint

  note bottom of btManifoldPoint
  A btManifoldPoint contains the 2 contact points, the normal and the
  distance.
  end note

  BulletWeightedShape o-- btCollisionObject

  BulletWeightedShape : SP::SimpleMatrix _inertia

  BulletDS o-- BulletWeightedShape

  BulletDS "1" o-- "n" btCollisionObject

  CollisionShape o-- btCollisionObject
  CollisionShape o-- OffSet

  BulletWeightedShape o-- OffSet

  OffSet : position
  OffSet : orientation

  note bottom of OffSet
  OffSet contains a relative displacement to the center of inertia: a
  relative position (x,y,z) and a relative orientation (a quaternion).
  end note

  btCollisionObject o-- btCollisionShape
  btCollisionObject : btVector3 origin
  btCollisionObject : btQuaternion orientation

  btCollisionShape <|-- btCylinderShape
  btCollisionShape <|-- btConeShape
  btCollisionShape <|-- btSphereShape
  btCollisionShape <|-- btBoxShape
  }

#+end_src

#+RESULTS:
[[file:MechanicsClassDiagram.png]]

** class diagram of how Gazebo physics engine works (for Bullet)

This is more or less how the Gazebo physics engine is organized, with
the Bullet engine given as an example.  It should help inform how we
organize the Mechanics API.

#+begin_src plantuml :file GazeboClassDiagram.png

  @startuml

  package Bullet {
  class btHingeConstraint
  class btSliderConstraint
  class btDiscreteDynamicsWorld
  class btCollisionShape
  class btBroadphaseInterface
  class btRigidBody
  'class btDefaultCollisionConfiguration
  'class btCollisionDispatcher
  'class btSequentialImpulseConstraintSolver
  btCollisionShape <|-- btSphereShape
  btCollisionShape <|-- btBoxShape
  btCollisionShape <|-- btGImpactMeshShape
  btCollisionShape <|-- btCylinderShapeZ
  }

  package Gazebo {

  PhysicsEngine o-- ContactManager
  PhysicsEngine o-- World

  PhysicsEngine : +CreateLink()
  PhysicsEngine : +CreateCollision()
  PhysicsEngine : +CreateShape()
  PhysicsEngine : +CreateJoint()
  PhysicsEngine : +CreateModel()
  PhysicsEngine : +SetGravity()
  PhysicsEngine : +UpdatePhysics()
  PhysicsEngine : +UpdateCollision()

  class Link
  class Collision
  class Shape
  class Joint
  class Model

  Shape : scale

  Shape <|-- SphereShape
  Shape <|-- MeshShape
  Shape <|-- BoxShape
  Shape <|-- CylinderShape

  Joint <|-- HingeJoint
  Joint <|-- SliderJoint

  Collision : SetShape()
  Collision *-- Shape

  Link : OnCollision()
  Link "1" *-- "n" Collision : pointers to Collision maintained as SDF children, see Link::GetCollision()
  Link "n" o-- "1" Joint

  Model "1" *-- "n" Link
  Model "1" *-- "n" Joint

  World *-- Model

  note top of Model
  A model is a collection of links, joints, and plugins.
  end note

  note top of Link
  Link class defines a rigid body entity, containing information
  on inertia, visual and collision properties of a rigid body.
  end note

  note top of ContactManager
  =Aggregates all the contact information generated
  by the collision detection engine.
  end note

  note top of World
  The world provides access to all other object within
  a simulated environment.

  The World is the container for all models and their
  components (links, joints, sensors, plugins, etc), and
  WorldPlugin instances.  Many core function are also
  handled in the World, including physics update, model
  updates, and message processing.
  end note

  package Gazebo-Bullet {
  HingeJoint <|-- HingeJoint_BulletJoint
  SliderJoint <|-- SliderJoint_BulletJoint
  HingeJoint_BulletJoint <|-- BulletHingeJoint
  SliderJoint_BulletJoint <|-- BulletSliderJoint
  BulletJoint <|-- HingeJoint_BulletJoint
  BulletJoint <|-- SliderJoint_BulletJoint
  Joint <|-- BulletJoint
  PhysicsEngine <|-- BulletPhysics
  Link <|-- BulletLink
  Collision <|-- BulletCollision
  SphereShape <|-- BulletSphereShape
  MeshShape <|-- BulletMeshShape
  BoxShape <|-- BulletBoxShape
  CylinderShape <|-- BulletCylinderShape

  BulletLink *-- btRigidBody
  BulletLink "1" *-- "n" btCollisionShape

  note top of BulletSphereShape
  BulletSphereShape etc. must request the BulletLink by cast
  (BulletLink)Link via BulletCollision parent to make changes to the
  underlying btCollisionShape
  end note

  'With these, diagram is unreadable.
  'BulletCollision o-- BulletSphereShape
  'BulletCollision o-- BulletMeshShape
  'BulletCollision o-- BulletBoxShape
  'BulletCollision o-- BulletCylinderShape
  'BulletCollision o-- BulletLink
  }

  BulletPhysics *-- btBroadphaseInterface
  'BulletPhysics *-- btDefaultCollisionConfiguration
  'BulletPhysics *-- btCollisionDispatcher
  'BulletPhysics *-- btSequentialImpulseConstraintSolver
  BulletPhysics *-- btDiscreteDynamicsWorld

  BulletCollision *-- btCollisionShape

  BulletHingeJoint *-- btHingeConstraint
  BulletSliderJoint *-- btSliderConstraint
  }

  @enduml

#+end_src

#+RESULTS:
file:GazeboClassDiagram.png

** TODO Rover Revival. (common rope and siconos objectives)
   DEADLINE: <2016-12-25 Sun>
   + compilation and execution of Simple standalone rover     :FP:SS:
   + output trajectory in hdf5 (python version) :VA:MB:SS:
   + update Jan's blender plugin to do some visualization  :VA:MB:
   + Rover + granular ? standalone and Gazebo :SS:
     
* Development list for io
** TODO Naming convention and structure of the hdf5 mechanics io file
   DEADLINE: <2016-12-16 Fri>
   first discussion: <2016-03-14 Mon> 
   continue <2016-11-21 Mon>
   + naming 
     + cf --> contact_friction
     + dynamic --> position
     + velocity with the position
   + structure
     + split time frame
     + split hdf5 file

*** Actual structure

h5dump cylinder.hdf5  | grep -E 'DATASET|GROUP'
GROUP "/" {
   GROUP "data" {
      GROUP "boundary_conditions" {
      DATASET "cf" {
      DATASET "dynamic" {
      GROUP "input" {
         GROUP "cyl" {
            ATTRIBUTE "id" {
            ATTRIBUTE "inertia" {
            ATTRIBUTE "mass" {
            ATTRIBUTE "orientation" {
            ATTRIBUTE "time_of_birth" {
            ATTRIBUTE "translation" {
            ATTRIBUTE "velocity" {
            DATASET "Cyl-0" {
               ATTRIBUTE "group" {
               ATTRIBUTE "name" {
               ATTRIBUTE "orientation" {
               ATTRIBUTE "translation" {
         GROUP "ground" {
            ATTRIBUTE "id" {
            ATTRIBUTE "mass" {
            ATTRIBUTE "orientation" {
            ATTRIBUTE "time_of_birth" {
            ATTRIBUTE "translation" {
            ATTRIBUTE "velocity" {
            DATASET "Ground-0" {
               ATTRIBUTE "group" {
               ATTRIBUTE "name" {
               ATTRIBUTE "orientation" {
               ATTRIBUTE "translation" {
      GROUP "joints" {
      GROUP "nslaws" {
         DATASET "contact" {
            ATTRIBUTE "e" {
            ATTRIBUTE "gid1" {
            ATTRIBUTE "gid2" {
            ATTRIBUTE "mu" {
            ATTRIBUTE "type" {
      GROUP "permanent_interactions" {
      GROUP "ref" {
         DATASET "Cyl" {
            ATTRIBUTE "id" {
            ATTRIBUTE "primitive" {
            ATTRIBUTE "type" {
         DATASET "Ground" {
            ATTRIBUTE "id" {
            ATTRIBUTE "primitive" {
            ATTRIBUTE "type" {
      DATASET "solv" {
      DATASET "static" {
      DATASET "velocities" {

*** Proposition <2016-12-31 Sat>
    + file_info
      + IO hdf5 version
      + author
      + computer
      + siconos version
      + commit number ?
    + model
      + shapes (ref new name ?)
	DATASET (shape_name)
	ATTRIBUTE : id,primitive,type
      + GROUP bodies (ex . input, new name)
	ATTRIBUTE: id, inertia, mass, translation, orientation, velocity, time_of_birth,
	DATASET : (attached shape) group, name, translation, orientation
      + boundary_conditions
      + joints
      + permanent_interactions
      + nonsmooth_laws
        ATTRIBUTE e,gid1,gid2,mu,type
    + simulation
      + time step length h
      + integrator
	+ name or id.
	+ parameters (theta, # newton loop, tolerances...)
      + one_step_non_smooth_problem
	+ type
	+ solver id.
	+ solver parameters. (iparam, dparam, )
    + simulation_data
      + coordinates (q, position, orientation, ...)
      + velocities  (v)
      + forces      (total applied forces optional)
      + acceleration (a)
      + contact     (cf, should we split ?)
	+ id.
	+ n,t,s
	+ p_a, p_b
	+ lambda[0]
	+ lambda[1]
        + ...
	+ y
	+ u (contact velocity)
	+ internal variable of the nslaw
      + solver info.
	+ time step
	+ error, convergence,
	+ failed steps,


** DONE Tooling and features for siconos_vview siconos_filter <2016-07-15 vie>
   CLOSED: [2016-11-25 Fri 15:19]
*** Desired features for filtering tool

   - remove objects
   - decimate time (done)
   - cut off time (beginning and end) (done)
   - put together two hdf5 simulations

*** Desired features for vview

   - output current camera position
   - specific starting camera position
   - render video from command line
   - skip to end of file, updating automatically when file changes


* Port and support
** CrossCompilation - Windows
*** TODO Mingw: fix CFLAGS='-U__STRICT_ANSI__'
*** TODO sys/time.h limited avaibility
Provide a fallback mechanism to enable compilation on VS + ease compilation with mingw
*** TODO Create a nsis script to add the Path in the registry
*** TODO Adapt the siconos script (when it's rewritten in python) to work on windows
*** TODO Check why cmake fails to find parts the already required part when using a prefix
*** TODO Fix the kernel test
*** TODO Fix BUILD_AS_CPP definition (should't be defined on the command-line)
It is defined in NumericsConfig.h and this should be suffient
*** TODO See why there are a bunch a failures when switching to Release mode
*** TODO Remove the hack for exporting symbols and use __declspec(dllimport)
Right now a list of symbols to export is given to the linker thanks to a hackish selection,
using nm + sed, grep and friends. The proper way to do so is to use a DLLIMPORT macro
defined __declspec(dllimport) when needed. See VTK and many big FOSS project.



* Code reviews 						 :SICONOS:CODEREVIEW:
** Review Meeting with OB <2011-09-01 Mer> 			   :OB:MB:VA:
*** Siconos/Kernel
**** DONE VA review DeVNotes Chapter 9
     DEADLINE: <2011-09-15 Thu> CLOSED: [2011-10-26 Wed 11:01]
**** NewtonEulerDS.cpp
- todo remove _luW in map or attached to node
- todo rename _M in _massMatrix (same in LagragianDS.cpp)
- todo remove _ndof
- todo comment Jacobian fext mext --> to be added in Newton loop further
- todo remove _NNL and add _v (or _qDot) in fext and mext
- todo review Devnotes Chapter 9 (todo VA)
- todo relate Devnotes (boxed formulaes with code)
- todo neccessity _centerOfMass ?
- schedule _fL simpleVector ?
- schedule : rename W --> iterationMatrix
- schedule : Newton sur \dot q = Tv ??
- schedule : MechanicalDS.cpp ?
- schedule : neccesssity of v0 ?
- remark : hard dependence on quaternions
**** NewtonEulerR.hpp, NewtonEulerRFC3D.hpp, NewtonEulerRImpact.hpp
- done : Reference to DevNotes
- done : rename NewtonEulerRFC3D   --> NewtonEulerFrom3DLocalFrameR
- done : rename NewtonEulerRImpact --> NewtonEulerFrom1DLocalFrameR
- contactForce It is the right place ? Force in Joint ?
- what is the goal of _yProj ?
- question of _jachq, jachqT and a generic G for MechanicalR.cpp
- todo :  add updateLocalframe. checkvalidLocalframe
- todo : rename _Nc, _Pc1, _Pc2 to _normal, _contactPoint1, _contactPoint2
**** TimeSteppingProjectOnConstraints.hpp
   - todo : Doxycomment the methods
   - Comment : 2 independent Newton loops.
     + the first one for the velocity
     + the second one for the contraints for the position
        $h(q) = 0 $ and $\| Q \|=1$
       - Why there is a renornalization of q ?
       - Where is the computation of the residual ?
**** MLCPProjectOnconstraints.hpp
   - todo : Comment method computeOptions
   - todo : Comment the damping method  (*_z)*=0.2;
   - todo :  store the result of osnspb_pos in lambda[0] and p[0]

* Tricks
astyle --style=ansi -U -v -s2
** Howto to generate doc and Web site ?


*** local generation
In a build directory

cd ---/Build/Numerics
cmake -DWITH_DOCUMENTATION=ON -DDOXYGEN_OUTPUT=../GeneratedDocs  ~/siconos/trunk/Numerics
make doc
cd ---/Build/Kernel
cmake -DWITH_DOCUMENTATION=ON -DDOXYGEN_OUTPUT=../GeneratedDocs  ~/siconos/trunk/Kernel
make doc
cd ---/Build/Examples
cmake -DWITH_DOCUMENTATION=ON -DDOXYGEN_OUTPUT=../GeneratedDocs  ~/siconos/trunk/Examples
make doc
cd ---/Build/Homepage
cmake  -DDOXYGEN_OUTPUT=../GeneratedDocs  ~/siconos/trunk/Docs
make doc

repeat the whole process at least one time for Tags

rsync -avu --exclude '*~' --delete --rsh="ssh -l username" ../GeneratedDocs/* username@scm.gforge.inria.fr:/home/groups/siconos/htdocs/version_number







*** publish documentation on website

use trunk/Dev/Tools/publish (local generation is done on the fly by
the script so previous tip is not needed)

examples:
 - devel version
./publish -u <gforge user> -d

 - version 3.4.0 (= rev 3194)
./publish -r3194 -u <gforge user>

* Obsolete stuff
** Development list for FrontEnd		     :SICONOS:DEVEL:FrontEnd:
*** DONE rename {dsg,indexset}.vertices() (mapping to std::vector)
    CLOSED: [2014-10-01 mer. 11:15]
    renamed in
    {dsg, indexSet}.{dynamicalSystems(), Interactions()}
    (still mappings to std::vector)
    The need for iterator on graph.vertices and edges may remain.
*** TODO doxygen latex -> sphinx
*** TODO document python only features
** Bugs - Tracker
*** Numerics
**** TODO Tests with MUMPS fails since it is quite verbose and outputs "ERROR ANALYSIS" :MAURICE:
*** Kernel
**** DONE Avoid namespace pollution in SiconosGraph.hpp (using namespace boost;)
     CLOSED: [2012-10-01 Mon 17:37]

**** TODO Prevent using LCP formulation with RelayNSL.		    :VINCENT:
     - if you use LCP formulation as osnspb in Siconos/Kernel with RelayNSL, the simulation runs perfectly well but the results are hazardous

* Interesting software libraries
** Collision / Physics

This list is restricted to open source 3D collision detection
libraries, or physics libraries that include a collision detection
component that can be used on its own.

| Name      | URL                                                                         | Language        | Last update | Notes                 | License            |
|-----------+-----------------------------------------------------------------------------+-----------------+-------------+-----------------------+--------------------|
| Bullet    | http://bulletphysics.org/                                                   | C++             |             | Used in Siconos       | zlib               |
| OZCollide | http://www.tsarevitch.org/ozcollide                                         | C++             |             |                       | LGPL               |
| ODE       | http://opende.sf.net                                                        | C++/C interface |             |                       | LGPL v2.1+         |
| ncollide  | http://ncollide.org/                                                        | Rust            |             |                       | BSD3               |
| V-Collide | http://www3.cs.stonybrook.edu/~algorith/implement/V_COLLIDE/implement.shtml | C/C++           |        1998 | uses RAPID            | Unspecified        |
| RAPID     | http://www3.cs.stonybrook.edu/~algorith/implement/RAPID/implement.shtml     | C/C++           |       1995? |                       | Unspecified        |
| SOLID     | http://solid.sourceforge.net/                                               | C++             |        1999 |                       | LGPL v2            |
| OPCODE    | http://www.codercorner.com/Opcode.htm                                       | C++             |        2003 |                       | Unspecified        |
| ColDet    | https://sourceforge.net/projects/coldet/                                    | C++             |             |                       | LGPL v2            |
| PQP       | http://gamma.cs.unc.edu/SSV/                                                | C++             |        1999 | works, mesh-mesh only | Permissive         |
| V-Clip    | http://www3.cs.stonybrook.edu/~algorith/implement/V-CLIP/implement.shtml    | C++             |    Not sure | Unspecified           |                    |
| CollDet   | http://cgvr.cs.uni-bremen.de/research/colldet/                              | C++             |        2007 | For OpenSG            | Permissive (educ.) |
| FCL       | https://github.com/flexible-collision-library/fcl                           | C++             |        2015 | Uses libCCD           | BSD                |
| libCCD    | https://github.com/danfis/libccd                                            | C++             |        2016 | Convex-convex GJK     | BSD                |
| klampt    | http://motion.pratt.duke.edu/klampt/index.html                              | C++             |        2016 | "robust contact"      | Permissive (Indiana) |

Other resources:

| https://otik.zcu.cz/bitstream/handle/11025/5966/E59.pdf  | Paper includes a survey of collision libraries            |
| http://gamma.cs.unc.edu/research/collision/packages.html | Rest of the UNC algorithms, most require filing a request |

** CAD modeling

CAD libraries / tools generally support constructive geometry
modeling, implicit curved surfaces, etc., instead of just mesh
representations.  Generally don't include any physics support.

| FreeCAD      | http://www.freecadweb.org/ | C++/Python | Based on Open CASCADE (OCCT), used in Siconos           | LGPL v2+               |
| Open CASCADE | http://www.opencascade.com | C++        | http://git.dev.opencascade.org/gitweb/                  | LGPL v2.1              |
| OpenSCAD     | http://www.openscad.org/   | Qt/C++     | Constructive geometry front-end, not a library          | GPL v2                 |
| OpenCSG      | http://www.opencsg.org/    | C++        | Constructive geometry rendering engine used by OpenSCAD | GPL v2                 |
| CGAL         | http://www.cgal.org/       | C++        | Geometric algorithms used by OpenSCAD                   | GPL v3+, or commercial |
| SolveSpace   | http://solvespace.com/     | C++        | Constructive geometry 2D/3D                             | GPL 3                  |

** Scene graph

Scene graph libraries maintain a graph of objects that can be rendered
visually, but generally physics is left to an external solution.

| OpenSG         | http://www.opensg.org/         | C++ | LGPL v2         |
| OpenSceneGraph | http://www.openscenegraph.org/ | C++ | LGPL (modified) |

** Simulators

A simulator is a software environment that integrates a simulation engine for a
particular purpose, such as robotics, circuit design, etc.  These could be good
candidates for integrating Siconos as a back-end/engine.

| Name          | URL                                       | Type        | Engine              | Language | Licence    |
|---------------+-------------------------------------------+-------------+---------------------+----------+------------|
| Gazebo        | http://gazebosim.org/                     | Robotics    | Multi               | C++      | Apache 2.0 |
| MORSE         | http://www.openrobots.org/morse/          | Robotics    | Bullet              | Python   | BSD        |
| Blender       | https://www.blender.org                   | Art/etc     | Bullet              | C++/Py   | GPL 2+     |
| RoboCup       | https://sourceforge.net/projects/sserver/ | Robotics    | SimSpark            | C++      | LGPL 3     |
| OpenSimulator | http://opensimulator.org/                 | "Cloud" sim | ODE / Bullet(expr.) | C#       | Permissive |

** Materials modeling

| Name | URL                      | Type | Language | Licence      |
|------+--------------------------+------+----------+--------------|
| Vega | http://run.usc.edu/vega/ | FEM  | C++      | 3-clause BSD |

* Footnotes



* Siconos Meeting  					    :SICONOS:Meeting:
** <2011-09-01>
   Presents : FP, OB, VA, MB.
*** Siconos/Numerics:
- Matrices creuses
- FrictionContact3D
- Batterie de tests
   + Algorithme Fischer/Burmeister.
   + Algo de Florent.  (SOCP)
   + Algo homotopie.
- Nouveau solveurs:
   + MixedFrictionContact3D (Egalite + FC3D)
   + LCP + FrictionContact2D () pour l'EventDriven
*** Siconos/Kernel
+ Integrer MUMPS proprement.
+ Gestion de memoire.
  + Matrices et vectors de taille fixes
  + Construction a partir de memoire exterieure.
  + Memory pool

+ Objets de simulation/ objets accroches aux noeuds.
*** Gestion I/O
+ serialization
** <2012-01-24 Mar>
Who : FP, MB, OH, VA
+ add Org file in /trunk/Docs
  siconos.org
+ publish nightly
+ doxygen documentation
  + example file in doxygen DynamicalSystem.*
  + restructure
+ web site.
  + Recipes for generating web docs
+ Release 3.4.0
  + When ?
+ dev lists
 + oriented graph
 + Symmetric case
 + Fortran
** <2012-02-07 Mar>
+ release fin du mois
  + doc sur le web et hierarchie
  + doc frontend
  + getting started in Python
  + fixed examples
  + ameliorer la frontPage
+ dev lists
  + virer XML
  + menage Docs, Comm,
  + Reprendre RR
** <2012-09-18 Tue>
*** release fin du mois
+ résoudre le bug d'appel à partir de Python d'une fonction prenant une référence en paramètre (besoin d'une typemap swig)
+ remplir les changelogs
+ Faire tout passer au vert sur le CDash
*** Objectifs pour la future release (3.6)
+ extraire Multibody (c'est à dire le présenter comme un composant de Siconos, au même titre que Numerics, Kernel, ...) et ajouter le travail d'O. Bonnefon
+ reprendre ce qui marche de Saladyn
*** le solveur de Newton ne donne pas des résultats satisfaisants
La boucle de Newton ne converge pas, même avec un nombre important d'itérations
Il faut essayer de descendre le pas de temps pour voir si les choses s'améliorent, après la release
*** passage à Git :
à faire après la release. Le dépot actuel sera découpé en 2 : siconos pour tout ce qui est distribué au grand public
(Numerics, Kernel, Front-End, IO, Build) et siconos junk qui contient toute la partie vraiment privée (Sandbox, Dev, Comm, ...).
Le project actuel sur la forge sera converti en git et un project siconos junk a déjà été créer sur la forge imag https://forge.imag.fr/projects/siconos-junk/
*** framework test python
Est ce qu'il serait plus stratégique d'utiliser uniitest à la place de py.test pour les tests du Front-End
** <2012-10-16 Mar>
   + Saladyn.
     - Depot. A.P.P.
     - Mise a jour avec les modifications
   + Interaction/Relation ==> M3.6
     - Probleme lie aux stockages des Jacobiens dans les relations
     - Utilisation des graph properties pour stocker
   + Release 3.5
     - Bunch of warnings
     - Depot des paquets. Numerics OH Kernel VA. Front-End MB
     - Documentation doxygen
   + Release 3.6
     - Decoupage du repot git
     - Application de mkastyle
     - Acces aux sources. Un compte Gforge avec un acces git
     - Page Ph qui envoie un mail, inscrit
     - Creation de Siconos/Mechanics
** <2013-02-19 Mar>
   + Franck : Reprise des *.i du Front-End for Numerics
     + test ok.
     + python install grace a setup.py
        + Fixer les variables d'install
   + Release 3.6 (old todo list)
     - Decoupage du repot git  DONE
     - Application de mkastyle DONE
     - Creation de Siconos/Mechanics DONE
     - Acces aux sources. Un compte Gforge avec un acces git TO BE DONE
     - Page php qui envoie un mail, inscrit TO BE DONE
   + Release 3.6
     - Decoupe Kernel.i
     - Decoupe SimpleMatrix.cpp ou librairie independante.
     - Meta CMakeLists.txt
     - compte CI (continuous integration)
     - Integration FreeCAD et Blender
     - Ajout du Shooting
     - Virer XML. utiliser le schema avec Boost::serialization.
     - Prevoir Siconos/Control
** <2013-10-15 Mar>
   + Release 3.6 (old list)
     - Decoupe SimpleMatrix.cpp ou librairie independante. DONE
     - Meta CMakeLists.txt DONE
     - compte CI (continuous integration) DONE
     - Integration FreeCAD et Blender POSTPONE
     - Decoupe Kernel.i POSTPONE
     - Ajout du Shooting POSTPONE
     - Virer XML. utiliser le schema avec Boost::serialization. POSTPONE
     - Prevoir Siconos/Control POSTPONE
   + Add Release 3.6.0
     - Changelog
     - Fix the examples (V.A.)
     - Fix Numerics test (F.P.)
     - Changer les tags 3.6-dev --> 3.6.0   (M.B.)

** <2013-11-26 Mar>
   + FreeCAD seems to be a good option
   + papi ? tau ? instruments
   + Release 3.6.1
     - Doc User Guide. Event-Driven. (F.P.)
     - Doc Install Guide + ajouter un lien  (O.B.)
     - Doc Mechanics (V.A.)
     - Doc Front-End (one page. M.B.).
   + Release 3.7 (Wish list)
     - Decoupe Kernel.i
     - Doc Python Sphinx for Front-End. (F.P.)
     - Integration FreeCad Mechanics (M.B. V.A.)
     - Virer XML. Proto XML --> Python --> C++
     - Prevoir Siconos/Control (O.B.)
     - Ajout Periodic Shooting (Simulation, \ldots, ). (F.P.)
       + Parallel simulations  (Simulation typdedef )
       + Keep state in Dynamical.
       + Remove Dynamical set (F.P.)
     - Siconos Forward declaration
     - Remove shared pointers and use const &  instead
     - Videos (F.P.)
     - Remove ApiC
** <2014-03-18 Mar>
+ Release 3.7 deadline by the end of April.
  + Documentation
    - Doc User Guide. Event-Driven. (F. P.)
    - Doc Install Guide + ajouter un lien  (O. H.)
    - Doc Mechanics (V.A.)
    - Doc Front-End --> link to Sphinx doc. issue Math output (M. B.)
  + Decoupe Kernel.i
    + Wait for Swig 3.0.
    + Memory issue with I/O. Add a flag WITH_SERIALIZATION
  + Integration FreeCad Mechanics (M.B. V.A.)
  + Virer XML. Proto XML --> Python --> C++
    + xsd schema based.
    + Limit to imput data
    + Need to improve the schema
    + Script siconos in python with integration of the new XML input interface.
    --> review code
  + Prevoir Siconos/Control (O.H.)
  + Ajout Periodic Shooting (Simulation, \ldots, ). (F.P.)
      + Parallel simulations  (Simulation typdedef )
      + Keep state in Dynamical (vector).
      + Remove Dynamical set (F.P.) done
      + Object state-less.
  + Siconos Forward declaration
    + In progress
    + Remove SiconosForward for Swig
  + Remove shared pointers and use const & instead
  + Videos (M.B.)
  + Numerics
    - PSOR, CPG doesn't work. --> generic VI formulation. RPGS, PGS, ...
    - Newton interface with struct with env.
** <2014-05-20 Mar>
+ Release 3.7 deadline by the end of June.
  + Documentation
    - Doc User Guide. Event-Driven. (F.P.)
    - Doc Install Guide + ajouter un lien  (O.H.)
    - Doc Mechanics (V.A.)
    - Doc Front-End --> link to Sphinx doc. Issue Math output (M. B.)
  + Virer XML. Done
  + Proto XML --> Python --> C++
    + xsd schema based.
    + Limit to input data
    + Need to improve the schema
    + Script siconos in python with integration of the new XML input interface.
    --> review code
  + Siconos Forward declaration
    + In progress
    + Remove SiconosForward for Swig
  + Remove shared pointers and use const & instead
  + Videos (M.B.)
  + Numerics
    - PSOR, CPG, LATIN, doesn't work.
      --> generic VI formulation. RPGS, PGS, ...
    - Newton interface with struct with env.
  + Mechanisms.
     - Update with Kernel.

+ Release 3.8 deadline by the end of December
  + Integration FreeCad Mechanics (M.B. V.A.)
  + Ajout Periodic Shooting (Simulation, \ldots, ). (F.P.)
      + Parallel simulations  (Simulation typdedef )
      + Keep state in Dynamical (vector).
      + Remove Dynamical set (F.P.) done
      + Object state-less.
  + Decoupe Kernel.i
    + Wait for Swig 3.0.
    + Memory issue with I/O. Add a flag WITH_SERIALIZATION  done
  + Prevoir Siconos/Control (O.H.)

** <2014-09-16 Tue>

+ Release 3.8 deadline by the end of December
  + Documentation
    + Doc User Guide. Event-Driven. (F.P.)
    + Doc Install Guide + ajouter un lien  (O.H.)
    + Doc Mechanics (V.A.)
    + Doc Front-End --> link to Sphinx doc. Issue Math output (M. B.)
  + Siconos Forward declaration
    + In progress
    + Remove SiconosForward for Swig
  + Videos (M.B.)
    + Tippe top.
      - decollement ?
    + impacting double pendulum
  + Numerics
    + Solver LCP
      - PSOR, CPG, LATIN, doesn't work.
      --> generic VI formulation. RPGS, PGS, (V.A.)
    + Newton interface with struct with env : Done (O.B.).
  + Integration FreeCad Mechanics (M.B. V.A.)
  + Decoupe Kernel.i
    + Wait for Swig 3.0.
    + Memory issue with I/O. Add a flag WITH_SERIALIZATION  done
  + Ajout Periodic Shooting (Simulation, \ldots, ). (F.P.)
    + Parallel simulations  (Simulation typdedef )
    + Keep state in Dynamical (vector).
    + Remove Dynamical set (F.P.) done
    + Object state-less.
  + Prevoir Siconos/Control (O.H.)

+ Article Siconos
  + Bouncing Ballexample
  + DiodeBridge example.
  + Fill the section example.

** <2015-09-08 Tue>
Discussion build/distrib/test
*** Compilation/Build
    + Components: Numerics,Kernel,Control,IO Mechanics
    + One single cmake project under siconos/
      + remove Numerics/CMakeLists.txt
	keep Numerics/src/CMakeLists.txt
	the same for each components (Numerics,Kernel,Control,IO Mechanics)
      + move siconos/Numerics/cmake in siconos/
    + Build with three main targets.
      The goal is to adapt the dependencies (try to avoid the use of explicit -DWITH...
         except for specific developers choices.)
      + standard
        Numerics, Kernel, Front-End, Control, Mechanics (without Mechanisms)
      + Siconos-bullet
	standard + bullet
      + Siconos-mechanisms
	standard + mechanisms (oce+pythonocc)
    + We continue to build a library for each component as it is
    + Developer CMAKE Options allows to build some components in Debug and other in release.
    + The installation of all headers with be in INSTALL_PREFIX/include/siconos
      (and not in INSTALL_PREFIX/include/Siconos/Numerics,  INSTALL_PREFIX/include/Siconos/Kernel, ...  )
    + For the moment, the directory Front-End is left as it is, but
      + the goal is to consider that Front-End is not a specific component.
      + wrap automatically SICONOS_WRAP_PYTHON=ON by default the components.
      + On longer terms, split the front end into the component.
      + try to fix the dependency problems with swig
    + Documentation
      + Write a INSTALL.md in Siconos with a maximum of details on CMAKE fucking options.
*** Distribution
    + One single package for siconos (STD) for ubuntu, debian and fedora.
      + Do not use Cpack
    + Possibility after to think of packaging Siconos-bullet and Siconos-mechanisms

*** test and CI
    + target of test based on Siconos standard (reduce the number of target)

Franck proposed to make the first draft in a new branch.

** <2015-10-13 Tue>
*** Merge and new version OK
*** Still remain to do:
   + Fis remaining tests
   + Update AUTHORS, README, INSTALL, ChangeLog.
   + Update documentation *.dox --> *.rst
       Control.dox
       EventDriven.dox
       LagrangianNLDS.dox
       NonSmoothLaw.dox
       SiconosAlgebra.dox
       UsersGuide.dox
       DS.dox
       Interactions.dox
       MoreauTimeStepping.dox
       Relations.dox*
       Simulation.dox
       UsingPlugin.dox
   + License S. Peters.
** <2015-12-10 Thu>
   + Who OB MB, FP, SS, VA
   + Presentation steve <--> siconos-team
   + Release :
     + Fix the issue concerning SimpleMatrix and SiconosMatrix in computeFoo functions
     + Have a look to the examples that do not work anymore
       + Numerics: PROX and Latin.
     + Update License to LGPL
     + Update ChangeLog (a single one for siconos).
     + Try to start to review of the doc on the website

** <2016-03-01 mar.>
   +Who FP, SS, VA, MB
   - class diagram : gazebo side (what is needed) + siconos/mechanics (spec: what we wants)
   - contact detection: SpaceFilter -> BroadPhase(abstract) with:
     BasicBroadPhase (BasicDS + basic contactors Sphere, Disks, etc.) + BulletBroadPhase
   - interface prototype (bullet only) for proof of concept and
     specification help, example with beads column (without rebound du to
     primitive shape contact probably) or bouncing box.

** <2016-04-13 Wed> Bullet Contact detection scouting

+ Influence of margin, gContactBreakingThreshold, (local) scaling. 
  + margin has NO effect between primive (Box, Sphere, Plane) even if we call convexconvex Algo cf table
  + gContactBreakingThreshold has an effect ONLY in the convexconvex Algo
    + problem for BoxBox SphereSphere
  + Sphere and Box when treated as convex hull are modified
    + sphere is a point plus a margin equal to the radius
    + Box: the margin is subtracted for obtaining "m_implicitShapeDimensions"

TODO

  + Understand what is handle,  support vertices ?
  + scaling has to be studied
  + thinking to the strategy
    + conversion to convex hull shape ? external treatment or by rewriting m_doubleDispatch table ( built in btDefaultCollisionConfiguration.cpp)
    + preprocessing of the convex shape 



|-------------+----------------------------------+----------------------------+-------------------------|
|             | Sphere                           | Box                        | ConvexShape             |
|-------------+----------------------------------+----------------------------+-------------------------|
| Sphere      | btSphereSphereCollisionAlgorithm | btConvexConvexAlgorithm    | btConvexConvexAlgorithm |
| Box         | --                               | btBoxBoxCollisionAlgorithm | btConvexConvexAlgorithm |
| ConvexShape | --                               | --                         | btConvexConvexAlgorithm |
|-------------+----------------------------------+----------------------------+-------------------------| 



** <2016-04-29 Fri>
*** License
    + Code outside externals --> externals (e.g.  Cholesky.hpp) 
    + Two choices   
      + Externals en LGPL v3, the remaining Apache v2
      + All in LGPL v3
 --> vote for the mixed version LGPL/Apache

   + TODO : move code in externals 
     + numerics 
         |-----------+--------+---+---+-----|
         | file      | action |   |   | who |
         |-----------+--------+---+---+-----|
         | fftw*     |        |   |   | OB  |
         | SimpleLCP |        |   |   |     |
         |-----------+--------+---+---+-----|
     + kernel
       |--------------------+--------+-----|
       | file               | action | who |
       |--------------------+--------+-----|
       | cholesky.hpp       | move   | VA  |
       | determinant.hpp    | move   |     |
       | expm.hpp           | move   |     |
       | random.hpp         | delete |     |
       | bindings_utils.hpp | move   |     |
       |--------------------+--------+-----|
     + control rien OB
     + mechanics
       |-------+----------------+-----|
       | file  | action         | who |
       |-------+----------------+-----|
       | qnb.f | move (license) | VA  |
       |-------+----------------+-----|

     + io  	 
      |-------------------------+--------+-----|
      | file                    | action | who |
      |-------------------------+--------+-----|
      | src/boost/serialization | move   | MB  |
      | renderer.py             | move   | VA  |
      | SimpleGui.py            | move   | VA  |
      |-------------------------+--------+-----|
     + wrap 
       |---------+-----------------------------------------+---|
       | file    |                                         |   |
       |---------+-----------------------------------------+---|
       | numpy.I | leave as it is ot update with copyright |   |
       |---------+-----------------------------------------+---|

*** HEADER

   Siconos is a program dedicated to modeling, simulation and control
   of non smooth dynamical systems.

   Copyright 2016 INRIA.

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

       
*** Release with new License.
    + Changelog
    + 4.0
      +

** <2016-05-17 Tue>
*** Release
   + License: GPL --> LGPL externals
   + test : ok. comment mettre les labels
   + move headers boost from io in externals M.B.
   + Numero 4.0 M.B.
   + Branch 4.0
*** Doc
   + github.io
   + publish ? script ?

*** TODO list following meeting of <2016-05-17 Tue>
   + branch and release MB
   + push new doc on website SS

 


** <2016-05-26 Thu>
   MB, SS, VA
*** Release 4.0
   + Generation XML and SiconosFullGenerated  
      http://stackoverflow.com/questions/34042933/boost-vector-serialization-append-issue#34043591
      Problem with loading of VectorofVectors. The load is made such that the vectors are append to the vector
      --> know issues
   + Renaming attributes(members of struct without underscore)
   + Changelog 
     
*** Mechanics. Collision interface 
   + Management of APIs.
     + 2D/3D
     + namespace siconos
     + naming convention of include 
       #include "SiconosVector.hpp" 
       --> #include "siconos/SiconosVector.hpp" ?
       --> #include "siconos/Vector.hpp" ?

   + Organization
     + /src 
       + /mechanisms
       + /joints
       + /collision
	 BodyDS.* BodyTimeStepping.* SiconosShape.* SiconosBroadPhase.*
         + /bullet (implementation with bullet shapes and contactors)
	   BulletBroadPhase.cpp
	 + /native  (basic implementation of simple shapes) 
	   Disk.*, Circle.*,  Sphere.* , ... + BasicBroadphase (SpaceFilter.*)

   + Code in proposed
     + split SiconosShape.* ?
       + add convex hull
       + add mesh
       + store parameters (for the moment store as in Bullet to avoid copy)
     + BodyDS
       + Computation of mass and inertia
	 + external service (in python, in bullet)
	 
     + naming of pose.
       + transalation = [x,y,z],
       + orientation = [q0, q1, q3, q4] a quaternion
       + position = [translation, orientation] 
         
     + group contactors
       
     + Broaphase --> builder

   + Contact detection Bullet
     + local_scaling, collision_margin, breakingThreshold
     + low level API of contact detection (raytracer, raytest, ...)
     + Chrono::Engine and Bullet ?
     + Bullet3 ? New 
 
   + vview.py
     + glyph disappear ?
     + 


   + CodeViz
     + Side effect of method
     + Why we need a shared pointer rather than a reference ?
       + new? make_shared? impact on memory allocation and organization
** <2016-06-14 Tue>
  + Update applications (SE, IMSRN)
    + Open engineering [[http://open-engineering.com]]
    + Logilab 
    + Ingeliance  
  + Lie integrator 
  + Parralelization (Open MP, Cuda)
    + block of codes on C
    + generation in Python
    + first // loop
  + mechanics_io
    + plugins
    + remove/ add DS dynamically
  + Mail announcement, 
  + packaging launchpad
    
** <2016-09-06 Tue>

MB, FP, SS, OH, VA

*** Previous Meeting
**** Launchpad --> MB, OH
    + Migrate debian directory on github siconos/siconos or siconos/debian
    + Check that launchpad work
    + openbuild suse --> packages debian
    + Fedora

**** Lie integration --> VA
    + no news

**** test fc3d --> failed nan VA

*** CI et passage des examples
    + pb de nettoyage --> MB

*** Siconos Mechanisms Industrialization
    + Siconos Mechanics / Mechanisms : towards a single library
    + FreeCAD
    + OpenEngineering   / support et maintenance.

*** Siconos Mechanics / Gazebo
    + hook in io.run()
    + WIP
    + Team competition NASA INRIA Chile

*** FC3D
    + Parallelization OpenMP
      + rapport Cluster de Catolica
	+ box stack : gain 16 et 32 cpus for the OPENMP raw parallel algorithm
          Catolica cluster report :
	  https://docs.google.com/document/d/1HSI2QoOFUoF67tKago41_Ir02x-UbbcwOoXYWhGjSsM/edit#heading=h.ybhxnfjiupu8
      + Raw parallel
	+ rename FOR solver
	+ speedup max de 6 with
      + DDM Naive
	+ Interface  domain decomposition
	+ partionning algorithm
	  + spatial domain decomposition (Bullet info, simple space filter, hash table, .. )
	  + graph partitioniong system SCOTCH/METIS
	  + create an example on which the naive decomposition
	+ visualization
	  + visualize domain and graph decomposition (coloring)
    + Explosion local solver
      + output problems. --> hdf5
      + cancel gyrospic forces.
      + filter
      + Accuracy of solving contacts
    + packaging launchpad
      + creation d'un compte siconos-team --> VA
      + import siconos HRP
      + ubuntu
      + debian
      + import siconos
** <2016-09-13 Tue>

SS, MB, VA

+ Discussion Cluster report
  + one the example of n_cubes : not os good results
  + one-wall 100 particles. speed up of 5 for 32 cores
  + visulaization tools for ditrubuted application totalview, vampire ?
  + large number of particles is necessary > 10000   to show an effect of parallelization
+ Newton Euler DS: 3DOF implementation
+ Discussion about instability of local solver
  + new hybrid local solver VA
  + solver LCP 4 faces ?
  + output problems that shows the problem --> hdf5 files (SS, VA)
  + implement a local proximal solver VA
+ DMM solver
  + visualization of domain (SS)
  + graph partitioning techniques (VA, MB)
  + improve paraview visualization stuff (MB)
+ interface mechanics / mechanics proposed
  + try to merge the mechanics proposed into the master branch and update all the examples : We will not maintain both API
  + work with OpenEng --> merge MBTB into the new interface

** <2016-10-17 Mon>

SS, MB, VA

Meeting @bremond @radarsat1 and myself

still to do,

- InteractionManager
  - factorize group management info and insertNonSmoothLaw
  - naming convention : remove get, rename collisionUpdater -->   collisionUpdaterVisitor
- SiconosContactor
  - rename siconosContactorS or SiconosContactorSet
  - why not visitor rather than a list of shapes ?  Why not a mixed solution :
      - a list of standard shapes (sphere, planes, cubes, convex hulls,) and
      - a generic shape with a visitor.
  - study of memory management
  - offset:
      - name ?
      - boost array of size 7 (3 translation, 1 quaternion) for saving space
-  BodyDS
    - mass matrix set to eye by default --> possibility to set Inertia Mass matrix
    - old API --> first shape gives the mass matrix.
    - computation of mass matrix and inertia with Huygens theorem

- tests that bench memory and efficiency
   - separate shape, mixed of shapes, contactors with multiple shapes, (mandatory)
   - time_of_birth and restart  (mandatory)
   - native ?  2D ? (optional)
** <2016-11-22 Tue> SIMPAR 2016 preparation

*** Update Rover example C++ code
    - ultimate goal is to do it in Gazebo/Siconos
*** VRML output ?
    - blender
*** failing examples with other dynamic example
    - Sebastien's example?
    -
*** Developnment of pivot jiont with friction
    - Real Coulomb friction ?
    - ideal joint / geometric contact
    - Viscous friction . LagrangianDS ok   NewtonEulerDS difficult to set a interbal fromce between Two Newton EulerDS


*** Control
    - sliding mode control of mechanical systems
    - coupling mechanics/electronics/contorl

*** Development of applications
    - AMTC.  Ensimag student. LHD
    -
** <2017-06-15 jue>
SS, MB, VA

(things to be discussed with FP and OH)

- continue supporting old GCC until at least 4.2 (aiming for december
  release), after that consider exploiting C++11/14/17 features.

- also wait until at least 4.2 for new SiconosVector features from
  @bremond, maybe even later (could make use of C++14)

- try to fix within-Newton-loop updateInteractions before 4.1 (SS)

- discussed briefly need for teams to work on numeric (parallelisation
  strategies), and format specifications for mechanical simulations.

- regardless of a better, more generalized format, agreed that some
  tweaks to our current HDF5 format are warranted.

- improve VTK output for ParaView also a priority, if possible.  check
  other possible VTK output formats.

Discussion :

+ IRICE project
  + Siconos, LMGC90, Yade
+ Hdf5 file format
  + naming
  + new entries
  + change time by index of time step.
  + disorder index in now allowed
  + indicate the number of entries for each index
  + branch for new format and filter
  + common format with other software
  + Improved structure:
    + Streaming
    + webGL application and Jupyter
  + XDMF
  + Gazebo format ?

  Conclusion : small project and after
+ Improve paraview visualization stuff (MB)
  + plugin paraview hdf5 or siconos_vexport
+ HPC
  + Framework Machine learning
  + GPU/CPU.

+ SiconosVector
  + Matrix/Vector has to be implemented
  + Mapping of boost quaterion onto the vector 7

+ UpdateWorldFromDS discussion

+ release 05 juillet



*** TODO 3 DOF particles
*** TODO Pop-corn effect
  + sum=up previous discussion in the issue


*** DONE InteractionManager
  - factorize group management info and insertNonSmoothLaw
  - naming convention : remove get, rename collisionUpdater -->   collisionUpdaterVisitor

*** DONE SiconosContactor
  - rename siconosContactorS or SiconosContactorSet
  - why not visitor rather than a list of shapes ?  Why not a mixed solution :
      - a list of standard shapes (sphere, planes, cubes, convex hulls,) and
      - a generic shape with a visitor.
  - study of memory management
  - offset:
      - name ?
      - boost array of size 7 (3 translation, 1 quaternion) for saving space
*** DONE BodyDS
    - mass matrix set to eye by default --> possibility to set Inertia Mass matrix
    - old API --> first shape gives the mass matrix.
    - computation of mass matrix and inertia with Huygens theorem

*** DONE Tests that bench memory and efficiency
   - separate shape, mixed of shapes, contactors with multiple shapes, (mandatory)
   - time_of_birth and restart  (mandatory)
   - native ?  2D ? (optional)

*** TODO Computation of inertia
   + for composite objects
     + review default case
       + density
       + volume, inertia come from a geometric

*** TODO Dynamics creation of objects
    + Solution with the controller of radarsat1 to be reviwed and discussed

** <2017-11-02 Thu> INRIA Chile

Steve, Vincent.

*** Missing devel for Siconos/Gazebo
 + SDF, siconos configuration
   profile in SDF for siconos ?
   configuration file for siconos hdf5, xml, without various profile serializatoion xml

   - time step
   - Newton tolerance, nb iterations
   - osi class
   - onsnp
   - onsnp solver, tolerance, nb iterations
   - projection techniques (position, velocities)

     time_stepping=None,
     h=0.0005,

     osi=Kernel.MoreauJeanOSI,
     theta=0.50001,

     Newton_options=Kernel.SICONOS_TS_NONLINEAR,
     Newton_max_iter=20,
     Newton_update_interactions=False,

     solver=Numerics.SICONOS_FRICTION_3D_NSGS,
     itermax=100000,
     tolerance=1e-8,

     projection_itermax=20,
     projection_tolerance=1e-8,
     projection_tolerance_unilateral=1e-8,
     contact_index_set=1,

     numerics_verbose=False,
     verbose=True,
     verbose_progress=True,

     output_frequency=None,



 + debian packages
 + docker file. [[http://siconos.github.io/gazebo-siconos/]]
 + Evaluation of the devel with examples
   + siconos examples woodpecker, tippe top
   + robot examples of gazebo
   + LHD model with granular.
 + Mail to Steven Peters.

*** Efficiency of GMP
    + Think about a mixedfixedFrictionalContact for enabling a single GS loop
    + Implementatation of specific local solver
    + Thinking to a global Newton loop
    + Augmented Lagragian activation and active sets techniques (BrulsAcaryCardona)

*** Advantages of Siconos (selling work)
    + complicated model of joint with friction and stops (spehrical joints or pivot with friction and stops)
    + robustness and efficiency.
      - time step ? number of iterations in GMP/NSGS find lower bounds for this parameter
      - Projection onto the constraints with Augmented Lagragian activation and active sets techniques

*** Future plans
    + Extensions
      + Blender plug-ins? https://www.youtube.com/watch?v=BGAwRKPlpCw
      + Blendyn
      + VREP plug-in
      + Paraview output online
      + Jupyter output

    + Publications:
      - IROS 2018 paper
      - RT INRIA on Siconos and then paper (IJNME CMAME)

    + Prepare a general presentation with links and movie
